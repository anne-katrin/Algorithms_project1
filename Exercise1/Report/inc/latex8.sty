\ProvidesClass{inc/mas}
\NeedsTeXFormat{LaTeX2e}[2005/12/01]
\RequirePackage{fixltx2e} % fixes som latex2 issues
\LoadClass{article}
% FONTS
\renewcommand{\familydefault}{\sfdefault}
\RequirePackage[T1]{fontenc}
\RequirePackage[utf8]{inputenc} % give me åäö
\RequirePackage[scaled=0.92]{helvet}
% \defaultfontfeatures{Mapping=tex-text} % converts LaTeX specials (``quotes'' --- dashes etc.) to unicode
% \setromanfont [Ligatures={Common}, BoldFont={Fontin Bold}, ItalicFont={Fontin Italic}]{Fontin}
% \setsansfont [Ligatures={Common}, BoldFont={Fontin Sans Bold}, ItalicFont={Fontin Sans Italic}]{Fontin Sans}
\usepackage{sectsty} % set header styles
% \usepackage[normalem]{ulem} 
% \sectionfont{\rmfamily\mdseries\upshape\Large}
% \subsectionfont{\rmfamily\bfseries\upshape\normalsize} 
% \subsubsectionfont{\rmfamily\mdseries\upshape\normalsize}
%\RequirePackage{iwona}

\AtBeginDocument{
\hypersetup{
		pdftitle={\@title},%
		pdfauthor={Magnus Södergren},%
%				pdfkeywords={\@keywords}
		}	
}
% PACKAGES
\RequirePackage{keyval}
%\RequirePackage{sidecap} % side captions
\RequirePackage{parskip} % empty line between pragraphs
\RequirePackage{graphicx} % include graphic
%\RequirePackage{pgfplotstable} `% advanced tables
\RequirePackage{eso-pic} % add picture commands (or backgrounds) to every page. 
\RequirePackage{eurosym} % Euro Symbol Package for LaTeX  \euro(gives symbol)  \EUR{10} (gives correct spacing)
\RequirePackage{mdwlist} % advanced lists (enumerate*, itemize*, \suspend{itemize*} text \resume{itemize*} \item)
\RequirePackage{amssymb,amsmath} % mathematical packages 
\RequirePackage{array} % 	An extended implementation of the array and tabular environments which implements options to format columns.
\RequirePackage{cite} % automatically sorts citations and combine then (e.g. [1-4,7] instead of [1,2,3...)
\RequirePackage{color} % more color
\RequirePackage{verbatim,listings} % add source code to your document
\RequirePackage{pdfpages} % to import PDF pages  \includepdf[pages={2-7}]{/path/file.pdf}
\RequirePackage{ifthen} % to use if then else
\RequirePackage{rotating} % rotate any object of an arbitrary angle
\RequirePackage{setspace} % to change the spacing in different environments  [doublespace, onehalfspace, singlespace]
\RequirePackage{subfig} % to align figures and pictures with greater easy
\RequirePackage{caption} % caption package
\RequirePackage{wrapfig} % to wrap text around and image
\RequirePackage{named} %fancy referencing
\RequirePackage{textcomp,siunitx} % additional symbol
%\RequirePackage{showkeys} % uncomment to print keys from \label, \ref, \pageref, \cite, and \bibitem  (for debug purpose)
%\RequirePackage{showidx} % shows each index entry in the margin  (for debug purpose)
\RequirePackage{syntonly} % checks the syntax without producing a pdf (uncomment /syntaxonly  to activate
%\syntaxonly
\RequirePackage[plainpages=false,%
%   pdftitle={pdf title},%
%   pdfauthor={author name}%,
%   pdfkeywords={one, two, three}%
    bookmarks=true,         % show bookmarks bar?
    unicode=true,          % non-Latin characters in Acrobat’s bookmarks
    pdftoolbar=true,        % show Acrobat’s toolbar?
    pdfmenubar=true,        % show Acrobat’s menu?
    pdffitwindow=true,     % window fit to page when opened
    pdfstartview={FitV},    % fits the width of the page to the window
    pdfnewwindow=true,      % links in new window
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=black,          % color of internal links
    citecolor=black,        % color of links to bibliography
    filecolor=black,      % color of file links
    urlcolor=black,           % color of external links
		pdfpagelabels,	%	
		pdftex,%
		pagecolor=black,%
		pdfproducer={pdfLaTeX},%
		a4paper=true,%
		pagebackref=true,%
		pdfpagemode=UseNone]{hyperref} % hyperlinks
\usepackage[all]{hypcap} % correct hyperreferences in table
% Color constants.
\definecolor{firstlettercolor}{rgb}{0.40784,0,0}
\definecolor{sectioncolor}{rgb}{0.30784,0,0}
% Syntax Highlighting Commands
% \newcommand{\firstletter}[1]{\textcolor{firstlettercolor}{\textbf{{\fontencoding{T1}%
% \fontfamily{auncial}%
% \fontsize{45}{28}%
% \selectfont%
% #1}}}}

%{\fontencoding{T1}\fontfamily{Fontin sans}\fontsize{32}{10}\selectfont }

\newcommand{\firstletter}[1]{\textcolor{firstlettercolor}{\textbf{#1}}}

\urlstyle{same}
% background picture
\newcommand\BackgroundPic{\put(305,810){\parbox[t][14.4cm]{2.4cm}{\raggedright \includegraphics[scale=0.45,keepaspectratio]{img/black.png}}}}
\newcommand{\mail}[1]{\href{mailto:#1}{#1}}
\newcommand{\REF}{\Large\textbf{$\prime$}\normalsize}
\newcommand{\firstparagraph}[2]{\lettrine[lines=3, loversize=-0.1, lraise=0.1]{\firstletter{#1}}{ \space #2}}
\newcommand{\tinylist}{
	\setlength \topsep{0pt} 
	\setlength \itemsep{0pt}
	\setlength \parskip{0pt}
	\setlength \parsep{0pt}}

% set dimensions of columns, gap between columns, and paragraph indent 
\setlength{\textheight}{8.875in}
%papersize  a4wide
%\setlength{\textwidth}{7.175in}
% papersize  a4paper
\setlength{\textwidth}{6.875in}
\setlength{\columnsep}{0.3125in}
\setlength{\topmargin}{0in}
\setlength{\headheight}{0in}
\setlength{\headsep}{0in}
%\setlength{\parindent}{0pt} /usepackage{parskip} used instead
\setlength{\oddsidemargin}{-.304in}
\setlength{\evensidemargin}{-.304in}

\newcount\titlenotecount
\global\titlenotecount=0

%% Saves footnotes in tabulars/tables/figures
% \makesavenoteenv{table}
% \makesavenoteenv{tabular}
% \makesavenoteenv{tabular*}
% \makesavenoteenv{figure}
% \makesavenoteenv{figure*}

\AtBeginDocument{
		\hypersetup{
				pdftitle={\@title},%
				pdfauthor={\@author},%
%				pdfkeywords={\@keywords}
			}
}
%\DeclareOption{author=\@author}{\PassOptionsToPackage{\@author}{hyperref}} 

\def\subtitle#1{\gdef\s@btitle{#1}}
\def\@maketitle
   {
   \newpage
   \null
   \vskip .375in 
   \begin{center}
      {\Huge \bf \@title \par}
			\ifthenelse{\equal{\s@btitle}{}}{{\Large \bf \s@btitle \par}}
      % additional two empty lines at the end of the title 
      \vspace*{24pt} 
      {
      \large 
      \lineskip .5em
      \begin{tabular}[t]{c}
         \@author 
      \end{tabular}
      \par
      }
      % additional small space at the end of the author name 
      \vskip .5em 
      {
       \large 
      \begin{tabular}[t]{c}
         \@affiliation 
      \end{tabular}
      \par 
      }
      % additional empty line at the end of the title block 
      \vspace*{12pt}
			\includegraphics[scale=0.45,keepaspectratio]{img/black.png}
			\vspace*{12pt}
   \end{center}
	\thispagestyle{empty}
} 

\def\abstract
   {%
   \centerline{\Large\bf \color{sectioncolor} Abstract}%
		\vspace*{6pt}%
		\centerline{\rule{0.43\textwidth}{1pt}}%
   \it%
   }

\def\endabstract
   {
   % additional empty line at the end of the abstract 
   \vspace*{12pt} 
   }

\def\affiliation#1{\gdef\@affiliation{\textsl{#1}}} \gdef\@affiliation{}

\newlength{\@ctmp}
\newlength{\@figindent}
\setlength{\@figindent}{1pc}

\long\def\@makecaption#1#2{
   \vskip 10pt
   \setbox\@tempboxa\hbox{\tenhv\noindent #1.~#2} 
   \setlength{\@ctmp}{\hsize}
   \addtolength{\@ctmp}{-\@figindent}\addtolength{\@ctmp}{-\@figindent} 
   % IF longer than one indented paragraph line
   \ifdim \wd\@tempboxa >\@ctmp
      % THEN set as an indented paragraph
      \begin{list}{}{\leftmargin\@figindent \rightmargin\leftmargin} 
         \item[]\tenhv #1.~#2\par
      \end{list}
   \else
      % ELSE center
      \hbox to\hsize{\hfil\box\@tempboxa\hfil} 
   \fi
}

% correct heading spacing and type
\def\section{\@startsection {section}{1}{\z@}
   {14pt plus 2pt minus 2pt}{2pt plus 2pt minus 2pt} {\Large\bf\color{sectioncolor}}} 
\def\subsection{\@startsection {subsection}{2}{\z@}
   {12pt plus 2pt minus 2pt}{2pt plus 2pt minus 2pt} {\large\bf}}
\def\subsubsection{\@startsection {subsubsection}{3}{\z@}
   {0pt plus 0pt minus 0pt}{0.02pt plus 0.02pt minus 0.02pt} {\bf}}

%Remove section numbering
\setcounter{secnumdepth}{2}

\RequirePackage{lettrine}
\setcounter{DefaultLines}{2}
\renewcommand{\LettrineFontHook}{\color[gray]{0.5}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%		USEFUL
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% pt 	a point is 1/72.27 inch, that means about 0.0138 inch or 0.3515 mm.
% bp 	a big point is 1/72 inch, that means about 0.0139 inch or 0.3527 mm.
% mm 	a millimeter
% cm 	a centimeter
% in 	inch
% ex 	roughly the height of an 'x' in the current font
% em 	roughly the width of an 'M' (note the uppercase) of the current font

%\RequirePackage{ifpdf}
% And in the document:
% \ifpdf
%     % we are running pdflatex
% \else
%     % we are running latex
% \fi

% Align two tables
%   \begin{minipage}{2in}
%     \begin{tabular}{c}
%       Table1
%     \end{tabular}
%   \end{minipage}
%   \begin{minipage}{2in}
%     \begin{tabular}{c}
%       Table2
%     \end{tabular}
%   \end{minipage}

% Some programs create postscript files without a bounding box. Latex doesn't like this. To fix the problem, add a line like this to the top of the postscript file:
%%BoundingBox: 50 150 550 650

% Notes in the page margins are easily created with the command
% \marginpar{marginal note}
\setlength{\marginparwidth}{0.6in}
\let\oldmarginpar\marginpar
\renewcommand\marginpar[1]{\-\oldmarginpar[\raggedleft\footnotesize #1]%
{\raggedright\footnotesize #1}}